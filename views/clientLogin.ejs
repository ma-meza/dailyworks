<% include partials/regularEmptyHead.ejs %>
<% include partials/clientTopNavBar.ejs %>
<% include partials/clientBottomNavBar.ejs %>
<body>

    <a href="/"><img src="assets/logos/dwFullLogoBlack.svg" id="logoImgLogin" alt=""></a>
    <p id="formTitle"><%= __('Log in') %></p>
    <input type="email" class="textInput" id="emailInput" name="" placeholder="<%= __('your@email.com') %>" value="">
    <input type="password" class="textInput" id="passwordInput" name="" placeholder="<%= __('Password') %>" value="">
    <p id="messageP"></p>
    <input type="submit" id="inputSubmit" name="" value="<%= __('Log in') %>">
    <!-- <p class="optionsP">Forgot your password? <a class="optionsLink" href="#">Recover your password</a></p> -->
    <p class="optionsP"><%= __('Don\'t have an account?') %> <a class="optionsLink" href="/signup"><%= __('Create an account now') %></a></p>
    <p class="optionsP"><%= __('Forgot your password?') %> <a class="optionsLink" href="/resetPassword"><%= __('Reset your password now') %></a></p>


  <div id="footerContainer">
    <% if(locals.languageCookie){ %>
      <% if(languageCookie == "fr"){ %>
        <select id='langSelect'><option value='fr' selected>Francais</option><option value='en'>English</option></select>
      <% }else{ %>
        <select id='langSelect'><option value='fr'>Francais</option><option value='en' selected>English</option></select>
      <% } %>
    <% }else{ %>
      <select id='langSelect'><option value='fr'>Francais</option><option value='en' selected>English</option></select>
    <% } %>


    <p id="footerText">Â© <script>document.write(new Date().getFullYear());</script> Dailyworks, Inc. <%= __('All rights reserved.') %></p>
  </div>
    <!-- <a href="/googleAuth"><img id="loginGoogleButton" src="assets/socialIcons/googleIconLogin.png"></a>
    <a href="/facebookAuth"><img id="loginFacebookButton" src="assets/socialIcons/fbIcon.jpg"></a> -->

</body>



<style media="screen">
  body{
    background-color:#fff;
  }
    @media screen and (min-width:780px){
      #logoImgLogin{
        position:relative;
        margin:0 0 30px 20px;
        width:30%;
        left:0;
      }
      #formTitle{
        margin:0 0 30px 0;
        width:100%;
        padding:0 60px 0 60px;
        font-size:var(--desktop-font-size-page-title);
        position:relative;
        font-weight:var(--mobile-font-weight-bold);
        text-align:left;

        }
        .textInput{
          background-color:#fff;
          padding:0 20px 0 20px;
          width:calc(100% - 120px);
          position:relative;
          margin:0 60px 15px 60px;
          font-size:var(--desktop-font-size-regular);
          border:1px solid #000;
          border-radius:var(--official-border-radius);
          height:50px;
        }
        #inputSubmit{
          width:calc(100% - 120px);
          position:relative;
          margin:0 60px 30px 60px;
          border-radius:var(--official-border-radius);
          border:none;
          height:50px;
          background-color:var(--icon-color-active);
          color:#fff;
          font-weight:var(--mobile-font-weight-bold);
          font-size:var(--desktop-font-size-regular);
          cursor:pointer;
        }
        #messageP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 60px 0 60px;
          font-size:var(--desktop-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:var(--font-color-red);
        }
        .optionsP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 60px 0 60px;
          font-size:var(--desktop-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:#000;
        }
        .optionsLink{
          width:100%;
          font-size:var(--desktop-font-size-regular);
          font-weight:var(--mobile-font-weight-regular);
          color:var(--icon-color-active);
          text-decoration:none;
        }
        #loginGoogleButton{
          position:relative;
          margin:0 0 0 60px;
        height:40px;
    display:block;
        }

        #loginFacebookButton{
          position:relative;
          margin:0 0 0 60px;
        height:40px;
        display:block;
        }
    }




    @media screen and (max-width:780px){
      #logoImgLogin{
        position:relative;
        margin:50px 0 75px 20px;
        width:50%;
        left:0;
      }
      #formTitle{
        margin:0 0 30px 0;
        width:100%;
        padding:0 20px 0 20px;
        font-size:var(--mobile-font-size-page-title);
        position:relative;
        font-weight:var(--mobile-font-weight-bold);
        text-align:left;
        }
        .textInput{
          background-color:#fff;
          padding:0 10px 0 10px;
          width:calc(100% - 40px);
          position:relative;
          margin:0 20px 20px 20px;
          font-size:var(--mobile-font-size-regular);
          border:1px solid #a1a1a1;
          border-radius:4px;
          height:50px;
        }
        #inputSubmit{
          width:calc(100% - 40px);
          position:relative;
          margin:0 20px 30px 20px;
          border-radius:4px;
          border:none;
          height:52px;
          background:var(--gradient-cta-background);
          color:#fff;
          font-weight:var(--mobile-font-weight-bold);
          font-size:var(--mobile-font-size-regular);
          cursor:pointer;
        }
        #messageP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 20px 0 20px;
          font-size:var(--mobile-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:var(--font-color-red);
        }
        .optionsP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 20px 0 20px;
          font-size:var(--mobile-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:#000;
        }
        .optionsLink{
          width:100%;
          font-size:var(--mobile-font-size-regular);
          font-weight:var(--mobile-font-weight-bold);
          text-decoration:underline;
          color:#000;;
        }
        #loginGoogleButton{
          position:relative;
          margin:0 0 0 20px;
        height:40px;
    display:block;
        }

        #loginFacebookButton{
          position:relative;
          margin:0 0 0 20px;
        height:40px;
        display:block;
        }
    }
    #footerText{
      margin:0;
      top:0;
      left:0;
      padding:0 20px 0 20px;
      font-size:var(--mobile-font-size-regular);
      font-weight:var(--mobile-font-weight-regular);
      color:#a1a1a1;
      text-align:center;
    }
    #langSelect{
      text-align:left;
      left:50%;
      transform:translateX(-50%);
      margin:90px 0 30px 0;
      display:block;
      position:relative;
      border-radius:4px;
      padding:10px;
      background-color:#fff;
    }
    #footerContainer{
      width:100%;
      left:0;
      min-height:20px;
      top:0;
      position:relative;
      margin:0 0 70px 0;
      border:none;
      padding:20px 0 0 0;
      font-size:0;
      min-height:50px;
    }

</style>



<script>
  $("#emailInput").on('keyup', function (e) {
    if (e.keyCode === 13) {
        submitLoginForm();
    }
  });

  $("#passwordInput").on('keyup', function (e) {
    if (e.keyCode === 13) {
        submitLoginForm();
    }
  });

  document.getElementById("inputSubmit").onclick = function(){
    submitLoginForm();
  };


  function submitLoginForm(){
    document.getElementById('messageP').innerText = "";

    var email = $("#emailInput").val();
    var password = $("#passwordInput").val();



    if(email != "" && password != ""){
      //all fields are full
      $.ajax({
            url: '/postLocalClientLogin',
            type: 'post',
            data: {email:email, password:password},
            success: function( data, textStatus){
              if(data=="ok"){
                location.href = "/home"
              }else if(data=="userNoExist"){
                document.getElementById('messageP').innerText = "Looks like this email is not associated with any account";
              }else if(data=="passwordNoMatch"){
                document.getElementById('messageP').innerText = "Looks like this password is not right";
              }
            },
            error: function( textStatus, errorThrown ){
                console.log( errorThrown );
                document.getElementById('messageP').innerText = "Oups there was a server error, please try again.";
            }
        });
    }else{
      //one or more field is empty
      if(email ==""){
        document.getElementById('messageP').innerText = "Please write your email";
      }
      if(password ==""){
        document.getElementById('messageP').innerText = "Please write your password";
      }
    }
  }
</script>


<% include partials/changeLanguageScript %>
