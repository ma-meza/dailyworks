<%- include partials/regularEmptyHead.ejs %>
<body>
  <div id="mainFormContainer1">
    <a href="/"><img src="assets/logos/dwFullLogoBlack.svg" id="logoImg" alt=""></a>
    <p id="formTitle">Business sign up</p>
    <input type="text" class="textInput" id="businessNameInput" name="" placeholder="business name" value="">
    <input type="email" class="textInput" id="emailInput" name="" placeholder="email@business.com" value="">
    <input type="password" class="textInput" id="passwordInput" name="" placeholder="password" value="">
    <p id="messageP"></p>
    <input type="submit" id="inputSubmit" name="" value="Sign up">
    <!-- <p class="optionsP">Forgot your password? <a class="optionsLink" href="#">Recover your password</a></p> -->
    <p class="optionsP">Already have an account? <a class="optionsLink" href="/storelogin">Sign in now</a></p>
  </div>
</body>



<style media="screen">
  body{
    background-color:#fff4ec;
  }
    @media screen and (min-width:780px){
      #logoImg{
        position:relative;
        margin:0 0 30px 60px;
        width:30%;
        left:0;
      }
      #mainFormContainer1{
        width:80%;
        position:relative;
        max-width:550px;
        left:50%;
        margin:0;
        transform:translateX(-50%);
        height:auto;
        top:100px;
        background-color:#fff;
        border:none;
        box-shadow:var(--box-shadow-card);
        border-radius:var(--official-border-radius);
        padding:40px 0 40px 0;
      }
      #formTitle{
        margin:0 0 30px 0;
        width:100%;
        padding:0 60px 0 60px;
        font-size:var(--desktop-font-size-page-title);
        position:relative;
        font-weight:var(--mobile-font-weight-bold);
        text-align:left;

        }
        .textInput{
          background-color:#fff;
          padding:0 20px 0 20px;
          width:calc(100% - 120px);
          position:relative;
          margin:0 60px 15px 60px;
          font-size:var(--desktop-font-size-regular);
          border:1px solid #000;
          border-radius:var(--official-border-radius);
          height:50px;
        }
        #inputSubmit{
          width:calc(100% - 120px);
          position:relative;
          margin:0 60px 30px 60px;
          border-radius:var(--official-border-radius);
          border:none;
          height:50px;
          background-color:var(--cta-accent-color);
          color:#fff;
          font-weight:var(--mobile-font-weight-bold);
          font-size:var(--desktop-font-size-regular);
          cursor:pointer;
        }
        #messageP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 60px 0 60px;
          font-size:var(--desktop-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:var(--font-color-red);
        }
        .optionsP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 60px 0 60px;
          font-size:var(--desktop-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:#000;
        }
        .optionsLink{
          width:100%;
          font-size:var(--desktop-font-size-regular);
          font-weight:var(--mobile-font-weight-regular);
          color:var(--icon-color-active);
          text-decoration:none;
        }
        #signupGoogleButton{
          position:relative;
          margin:0 0 0 60px;
        height:40px;
    display:block;
        }

        #signupFacebookButton{
          position:relative;
          margin:0 0 0 60px;
        height:40px;
        display:block;
        }
    }

    @media screen and (max-width:780px){
      #logoImg{
        position:relative;
        margin:0 0 30px 20px;
        width:50%;
        left:0;
      }
      #mainFormContainer1{
        width:96%;
        position:relative;
        left:2%;
        margin:0;
        top:50%;
        transform:translateY(-50%);
        height:auto;
        background-color:#fff;
        border:none;
        box-shadow:var(--box-shadow-card);
        border-radius:var(--official-border-radius);
        padding:40px 0 40px 0;
      }
      #formTitle{
        margin:0 0 30px 0;
        width:100%;
        padding:0 20px 0 20px;
        font-size:var(--mobile-font-size-page-title);
        position:relative;
        font-weight:var(--mobile-font-weight-bold);
        text-align:left;

        }
        .textInput{
          background-color:#fff;
          padding:0 20px 0 20px;
          width:calc(100% - 40px);
          position:relative;
          margin:0 20px 15px 20px;
          font-size:var(--mobile-font-size-regular);
          border:1px solid #000;
          border-radius:var(--official-border-radius);
          height:50px;
        }
        #inputSubmit{
          width:calc(100% - 40px);
          position:relative;
          margin:0 20px 30px 20px;
          border-radius:var(--official-border-radius);
          border:none;
          height:50px;
          background-color:var(--cta-accent-color);
          color:#fff;
          font-weight:var(--mobile-font-weight-bold);
          font-size:var(--mobile-font-size-regular);
          cursor:pointer;
        }
        #messageP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 20px 0 20px;
          font-size:var(--mobile-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:var(--font-color-red);
        }
        .optionsP{
          margin:0 0 20px 0;
          width:100%;
          padding:0 20px 0 20px;
          font-size:var(--mobile-font-size-regular);
          position:relative;
          font-weight:var(--mobile-font-weight-regular);
          text-align:left;
          color:#000;
        }
        .optionsLink{
          width:100%;
          font-size:var(--mobile-font-size-regular);
          font-weight:var(--mobile-font-weight-regular);
          color:var(--icon-color-active);
          text-decoration:none;
        }
        #signupGoogleButton{
          position:relative;
          margin:0 0 0 20px;
        height:40px;
    display:block;
        }

        #signupFacebookButton{
          position:relative;
          margin:0 0 0 20px;
        height:40px;
        display:block;
        }
    }


</style>



<script>
  $("#emailInput").on('keyup', function (e) {
    if (e.keyCode === 13) {
        submitSignupForm();
    }
  });

  $("#passwordInput").on('keyup', function (e) {
    if (e.keyCode === 13) {
        submitSignupForm();
    }
  });

  $("#businessNameInput").on('keyup', function (e) {
    if (e.keyCode === 13) {
        submitSignupForm();
    }
  });

  document.getElementById("inputSubmit").onclick = function(){
    submitSignupForm();
  };


  function submitSignupForm(){
    document.getElementById('messageP').innerText = "";

    var name = $("#businessNameInput").val();
    var email = $("#emailInput").val();
    var password = $("#passwordInput").val();



    if(email != "" && password != "" && name != ""){
      //all fields are full
      if(name.length >=2 && email.length>6 && password.length>=6){
        //fields have good length

      $.ajax({
            url: '/postLocalStoreSignup',
            type: 'post',
            data: {email:email, password:password, storeName:name},
            success: function( data, textStatus){
              if(data == "ok"){
                location.href = "/storeLogin";
              }else if(data=="alreadyExist"){
                document.getElementById("messageP").innerText = "Looks like this email is already registered";
              }else if(data=="err"){
                document.getElementById("messageP").innerText = "Looks like there is an error, it's not you it's us";
              }else{
                document.getElementById("messageP").innerText = "Looks like there is an error, it's not you it's us";
              }
            },
            error: function( textStatus, errorThrown ){
              if(textStatus=="alreadyExist"){
                document.getElementById("messageP").innerText = "Looks like this email is already registered";
              }else if(textStatus=="err"){
                document.getElementById("messageP").innerText = "Looks like there is an error, it's not you it's us";
              }else{

              }
            }
        });
      }else{
        //not all fields have good length
        if(password.length<6){
          document.getElementById("messageP").innerText = "Your password must be at least 6 characters";
        }
        if(name.length<2){
          document.getElementById("nameUnderText").innerText = "Your business' name must be at least 2 characters";
        }
        if(email.length<6){
          document.getElementById("nameUnderText").innerText = "Your email must be at least 6 characters";
        }

      }
    }else{
      //one or more field is empty
      if(email ==""){
        document.getElementById('messageP').innerText = "Please write your email";
      }
      if(password ==""){
        document.getElementById('messageP').innerText = "Please write your password";
      }
      if(name == ""){
        document.getElementById('messageP').innerText = "Please write your business' name"
      }
    }
  }

</script>
